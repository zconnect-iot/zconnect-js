!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("immutable"),require("reselect"),require("xdate"),require("redux-saga")):"function"==typeof define&&define.amd?define("zc-core",["immutable","reselect","xdate","redux-saga"],t):"object"==typeof exports?exports["zc-core"]=t(require("immutable"),require("reselect"),require("xdate"),require("redux-saga")):e["zc-core"]=t(e.immutable,e.reselect,e.xdate,e["redux-saga"])}(this,function(e,t,r,n){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=19)}([function(e,t,r){"use strict";(function(e){function n(e,t,r){if(!t(e))throw c("error","uncaught at check",r),new Error(r)}function o(e,t){return b.notUndef(e)&&_.call(e,t)}function u(e,t){var r=e.indexOf(t);r>=0&&e.splice(r,1)}function a(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=void 0,n=new Promise(function(n){r=setTimeout(function(){return n(t)},e)});return n[S]=function(){return clearTimeout(r)},n}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments[3],o={name:r,next:e,throw:t,return:w};return n&&(o[p]=!0),"undefined"!=typeof Symbol&&(o[Symbol.iterator]=function(){return o}),o}function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"==typeof window?console.log("redux-saga "+e+": "+t+"\n"+(r&&r.stack||r)):console[e](t,r)}function s(t,r){return function(){return"development"===e.env.NODE_ENV&&c("warn",r),t.apply(void 0,arguments)}}r.d(t,"o",function(){return l}),r.d(t,"a",function(){return h}),r.d(t,"b",function(){return v}),r.d(t,"c",function(){return g}),r.d(t,"k",function(){return m}),r.d(t,"m",function(){return y}),r.d(t,"h",function(){return R}),t.d=n,r.d(t,"j",function(){return b}),t.n=u,t.f=a,t.l=i,t.g=s,r.d(t,"p",function(){return O}),r.d(t,"i",function(){return P}),r.d(t,"e",function(){return x});var f=(Object.assign,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),l=function(e){return"@@redux-saga/"+e},d=l("TASK"),p=l("HELPER"),h=l("MATCH"),S=l("CANCEL_PROMISE"),v=l("SAGA_ACTION"),g=l("SELF_CANCELLATION"),E=function(e){return function(){return e}},m=E(!0),y=(E(!1),function(){}),R=function(e){return e},_=Object.prototype.hasOwnProperty,b={undef:function(e){return null===e||void 0===e},notUndef:function(e){return null!==e&&void 0!==e},func:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e},string:function(e){return"string"==typeof e},array:Array.isArray,object:function(e){return e&&!b.array(e)&&"object"===(void 0===e?"undefined":f(e))},promise:function(e){return e&&b.func(e.then)},iterator:function(e){return e&&b.func(e.next)&&b.func(e.throw)},iterable:function(e){return e&&b.func(Symbol)?b.func(e[Symbol.iterator]):b.array(e)},task:function(e){return e&&e[d]},observable:function(e){return e&&b.func(e.subscribe)},buffer:function(e){return e&&b.func(e.isEmpty)&&b.func(e.take)&&b.func(e.put)},pattern:function(e){return e&&(b.string(e)||"symbol"===(void 0===e?"undefined":f(e))||b.func(e)||b.array(e))},channel:function(e){return e&&b.func(e.take)&&b.func(e.close)},helper:function(e){return e&&e[p]},stringableFunc:function(e){return b.func(e)&&o(e,"toString")}},T=(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0}(),function(e){throw e}),w=function(e){return{value:e,done:!0}},O=function(e,t){return e+" has been deprecated in favor of "+t+", please update your code"},P=function(e){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},x=function(e,t){return(e?e+".":"")+"setContext(props): argument "+t+" is not a plain object"}}).call(t,r(14))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.REQUEST="app/api/REQUEST",t.REQUEST_FETCHING="app/api/REQUEST_FETCHING",t.REQUEST_FAILED="app/api/REQUEST_FAILED",t.REQUEST_FETCHED="app/api/REQUEST_FETCHED",t.REQUEST_CACHE_USED="app/api/REQUEST_CACHE_USED",t.POLL_REQUEST="app/api/POLL_REQUEST",t.STOP_POLL_REQUEST="app/api/STOP_POLL_REQUEST"},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";if(arguments.length&&T.d(arguments[0],T.j.notUndef,"take(patternOrChannel): patternOrChannel is undefined"),T.j.pattern(e))return M(P,{pattern:e});if(T.j.channel(e))return M(P,{channel:e});throw new Error("take(patternOrChannel): argument "+String(e)+" is not valid channel or a valid pattern")}function o(e,t){return arguments.length>1?(T.d(e,T.j.notUndef,"put(channel, action): argument channel is undefined"),T.d(e,T.j.channel,"put(channel, action): argument "+e+" is not a valid channel"),T.d(t,T.j.notUndef,"put(channel, action): argument action is undefined")):(T.d(e,T.j.notUndef,"put(action): argument action is undefined"),t=e,e=null),M(x,{channel:e,action:t})}function u(e){return M(A,e)}function a(e){return M(I,e)}function i(e,t,r){T.d(t,T.j.notUndef,e+": argument fn is undefined");var n=null;if(T.j.array(t)){var o=t;n=o[0],t=o[1]}else if(t.fn){var u=t;n=u.context,t=u.fn}return n&&T.j.string(t)&&T.j.func(n[t])&&(t=n[t]),T.d(t,T.j.func,e+": argument "+t+" is not a function"),{context:n,fn:t,args:r}}function c(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return M(U,i("call",e,r))}function s(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return M(U,i("apply",{context:e,fn:t},r))}function f(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return M(j,i("cps",e,r))}function l(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return M(k,i("fork",e,r))}function d(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=l.apply(void 0,[e].concat(r));return o[k].detached=!0,o}function p(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1)return u(t.map(function(e){return p(e)}));var n=t[0];return T.d(n,T.j.notUndef,"join(task): argument task is undefined"),T.d(n,T.j.task,"join(task): argument "+n+" is not a valid Task object "+Q),M(L,n)}function h(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1)return u(t.map(function(e){return h(e)}));var n=t[0];return 1===t.length&&(T.d(n,T.j.notUndef,"cancel(task): argument task is undefined"),T.d(n,T.j.task,"cancel(task): argument "+n+" is not a valid Task object "+Q)),M(C,n||T.c)}function S(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return 0===arguments.length?e=T.h:(T.d(e,T.j.notUndef,"select(selector,[...]): argument selector is undefined"),T.d(e,T.j.func,"select(selector,[...]): argument "+e+" is not a function")),M(q,{selector:e,args:r})}function v(e,t){return T.d(e,T.j.notUndef,"actionChannel(pattern,...): argument pattern is undefined"),arguments.length>1&&(T.d(t,T.j.notUndef,"actionChannel(pattern, buffer): argument buffer is undefined"),T.d(t,T.j.buffer,"actionChannel(pattern, buffer): argument "+t+" is not a valid buffer")),M(J,{pattern:e,buffer:t})}function g(){return M(N,{})}function E(e){return T.d(e,T.j.channel,"flush(channel): argument "+e+" is not valid channel"),M(G,e)}function m(e){return T.d(e,T.j.string,"getContext(prop): argument "+e+" is not a string"),M(D,e)}function y(e){return T.d(e,T.j.object,T.e(null,e)),M(F,e)}function R(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return l.apply(void 0,[w.a,e,t].concat(n))}function _(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return l.apply(void 0,[w.b,e,t].concat(n))}function b(e,t,r){for(var n=arguments.length,o=Array(n>3?n-3:0),u=3;u<n;u++)o[u-3]=arguments[u];return l.apply(void 0,[w.c,e,t,r].concat(o))}t.q=n,r.d(t,"t",function(){return H}),t.l=o,t.b=u,t.m=a,t.d=c,t.c=s,t.g=f,t.i=l,t.p=d,t.k=p,t.e=h,t.n=S,t.a=v,t.f=g,t.h=E,t.j=m,t.o=y,t.r=R,t.s=_,t.u=b;var T=r(0),w=r(22),O=T.o("IO"),P="TAKE",x="PUT",A="ALL",I="RACE",U="CALL",j="CPS",k="FORK",L="JOIN",C="CANCEL",q="SELECT",J="ACTION_CHANNEL",N="CANCELLED",G="FLUSH",D="GET_CONTEXT",F="SET_CONTEXT",Q="\n(HINT: if you are getting this errors in tests, consider using createMockTask from redux-saga/utils)",M=function(e,t){var r;return r={},r[O]=!0,r[e]=t,r};n.maybe=function(){var e=n.apply(void 0,arguments);return e[P].maybe=!0,e};var H=T.g(n.maybe,T.p("takem","take.maybe"));o.resolve=function(){var e=o.apply(void 0,arguments);return e[x].resolve=!0,e},o.sync=T.g(o.resolve,T.p("put.sync","put.resolve"));var W=function(e){return function(t){return t&&t[O]&&t[e]}};W(P),W(x),W(A),W(I),W(U),W(j),W(k),W(L),W(C),W(q),W(J),W(N),W(G),W(D),W(F)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LOGIN_REQUEST="app/auth/LOGIN_REQUEST",t.LOGIN_FAILURE="app/auth/LOGIN_FAILURE",t.LOGOUT="app/auth/LOGOUT",t.LOGIN_USER="app/auth/LOGIN_USER",t.SET_USER_GROUPS="app/auth/SET_USER_GROUPS",t.REGISTER_USER="app/auth/REGISTER_USER",t.REGISTER_USER_SUCCESS="app/auth/REGISTER_USER_SUCCESS",t.REGISTER_USER_ERROR="app/auth/REGISTER_USER_ERROR",t.RESET_PASSWORD="app/auth/RESET_PASSWORD",t.RESET_PASSWORD_SUCCESS="app/auth/RESET_PASSWORD_SUCCESS",t.RESET_PASSWORD_CLOSE="app/auth/RESET_PASSWORD_CLOSE",t.RESET_PASSWORD_ERROR="app/auth/RESET_PASSWORD_ERROR",t.REFRESH_JWT="app/auth/REFRESH_JWT",t.RESET_AUTH_API="app/auth/RESET_AUTH_API"},function(t,r){t.exports=e},function(e,t,r){"use strict";function n(e){return u.j.channel(e)?"channel":Array.isArray(e)?String(e.map(function(e){return String(e)})):String(e)}function o(e,t){function r(t,r){if(c===i)return a;if(r)throw c=i,r;o&&o(t);var n=e[c](),u=n[0],s=n[1],f=n[2];return c=u,o=f,c===i?a:s}var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"iterator",o=void 0,c=t;return u.l(r,function(e){return r(null,e)},n,!0)}r.d(t,"b",function(){return i}),t.c=n,t.a=o;var u=r(0),a={done:!0,value:void 0},i={}},function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return n});var n=(r(0),r(15),r(24),Object.assign,{type:"@@redux-saga/CHANNEL_END"}),o="Saga was provided with an undefined action";"production"!==e.env.NODE_ENV&&(o+="\nHints:\n    - check that your Action Creator returns a non-undefined value\n    - if the Saga was started using runSaga, check that your subscribe source provides the action to its listeners\n  ")}).call(t,r(14))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetPasswordError=t.resetPasswordClose=t.resetPasswordSuccess=t.resetPassword=t.registerUserError=t.registerUserSuccess=t.registerUser=t.setUserGroups=t.loginFailure=t.resetAuthApi=t.logout=t.loginUserState=t.requestLogin=void 0;var n=r(3);t.requestLogin=function(e,t){return{type:n.LOGIN_REQUEST,email:e,password:t}},t.loginUserState=function(e,t){return{type:n.LOGIN_USER,userId:e,email:t}},t.logout=function(){return{type:n.LOGOUT}},t.resetAuthApi=function(){return{type:n.RESET_AUTH_API}},t.loginFailure=function(e){return{type:n.LOGIN_FAILURE,error:e}},t.setUserGroups=function(e){return{type:n.SET_USER_GROUPS,groups:e.map(function(e){return e.toLowerCase()})}},t.registerUser=function(e){return{type:n.REGISTER_USER,payload:e}},t.registerUserSuccess=function(){return{type:n.REGISTER_USER_SUCCESS}},t.registerUserError=function(e){return{type:n.REGISTER_USER_ERROR,error:e}},t.resetPassword=function(e){return{type:n.RESET_PASSWORD,payload:e}},t.resetPasswordSuccess=function(){return{type:n.RESET_PASSWORD_SUCCESS}},t.resetPasswordClose=function(){return{type:n.RESET_PASSWORD_CLOSE}},t.resetPasswordError=function(e){return{type:n.RESET_PASSWORD_ERROR,error:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stopPollApiRequest=t.pollApiRequest=t.requestCacheUsed=t.apiRequest=t.requestFailed=t.requestFetched=t.requestFetching=void 0;var n=r(1);t.requestFetching=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:n.REQUEST_FETCHING,meta:{endpoint:e,params:t}}},t.requestFetched=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];return{type:n.REQUEST_FETCHED,meta:{endpoint:e,params:t},payload:r}},t.requestFailed=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];return{type:n.REQUEST_FAILED,meta:{endpoint:e,params:t},payload:r,error:!0}},t.apiRequest=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:n.REQUEST,meta:{endpoint:e,params:t},payload:r}},t.requestCacheUsed=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:n.REQUEST_CACHE_USED,meta:{endpoint:e,params:t}}},t.pollApiRequest=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments[3];return{type:n.POLL_REQUEST,meta:{endpoint:e,params:t,interval:o},payload:r}},t.stopPollApiRequest=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:n.STOP_POLL_REQUEST,meta:{endpoint:e,params:t}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectRequestErrorStatus=t.selectRequestError=t.selectRequestResponse=t.selectRequestAPIState=t.selectTimeSinceLastFetch=t.selectTimeNow=t.selectLastFetchedTime=t.selectRequestPollingInterval=t.selectRequestPending=t.selectRequestFailed=t.selectRequestFetched=t.selectAPIDomain=void 0;var n=r(10),o=r(4),u=r(11),a=function(e){return e&&e.__esModule?e:{default:e}}(u),i=t.selectAPIDomain=function(e){return e.get("api")},c=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).endpoint},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.params;return void 0===r?{}:r},f=(0,n.createSelector)(c,s,function(e,t){return(0,o.fromJS)({endpoint:e,params:t})}),l=(0,n.createSelector)(i,f,function(e,t){return e.get(t,(0,o.Map)())}),d=t.selectRequestFetched=(0,n.createSelector)(l,function(e){return e.get("success")}),p=t.selectRequestFailed=(0,n.createSelector)(l,function(e){return e.get("error")}),h=t.selectRequestPending=(0,n.createSelector)(l,function(e){return e.get("fetching")}),S=(t.selectRequestPollingInterval=(0,n.createSelector)(l,function(e){return e.get("polling")}),t.selectLastFetchedTime=(0,n.createSelector)(l,function(e){return e.get("updated")})),v=t.selectTimeNow=function(){return new a.default},g=(t.selectTimeSinceLastFetch=(0,n.createSelector)(S,v,function(e,t){return e?new a.default(e).diffMilliseconds(t):null}),t.selectRequestAPIState=(0,n.createSelector)(p,d,h,function(e,t,r){return{failed:e,success:t,fetching:r}}),t.selectRequestResponse=(0,n.createSelector)(l,function(e){return e.get("response")}),t.selectRequestError=(0,n.createSelector)(l,function(e){return e.get("errorResponse",(0,o.Map)())}));t.selectRequestErrorStatus=(0,n.createSelector)(g,function(e){return e.getIn(["response","status"])})},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);r.d(t,"take",function(){return n.q}),r.d(t,"takem",function(){return n.t}),r.d(t,"put",function(){return n.l}),r.d(t,"all",function(){return n.b}),r.d(t,"race",function(){return n.m}),r.d(t,"call",function(){return n.d}),r.d(t,"apply",function(){return n.c}),r.d(t,"cps",function(){return n.g}),r.d(t,"fork",function(){return n.i}),r.d(t,"spawn",function(){return n.p}),r.d(t,"join",function(){return n.k}),r.d(t,"cancel",function(){return n.e}),r.d(t,"select",function(){return n.n}),r.d(t,"actionChannel",function(){return n.a}),r.d(t,"cancelled",function(){return n.f}),r.d(t,"flush",function(){return n.h}),r.d(t,"getContext",function(){return n.j}),r.d(t,"setContext",function(){return n.o}),r.d(t,"takeEvery",function(){return n.r}),r.d(t,"takeLatest",function(){return n.s}),r.d(t,"throttle",function(){return n.u})},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function u(e){if(l===clearTimeout)return clearTimeout(e);if((l===n||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function a(){S&&p&&(S=!1,p.length?h=p.concat(h):v=-1,h.length&&i())}function i(){if(!S){var e=o(a);S=!0;for(var t=h.length;t;){for(p=h,h=[];++v<t;)p&&p[v].run();v=-1,t=h.length}p=null,S=!1,u(e)}}function c(e,t){this.fun=e,this.array=t}function s(){}var f,l,d=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{l="function"==typeof clearTimeout?clearTimeout:n}catch(e){l=n}}();var p,h=[],S=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new c(e,t)),1!==h.length||S||o(i)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=s,d.addListener=s,d.once=s,d.off=s,d.removeListener=s,d.removeAllListeners=s,d.emit=s,d.prependListener=s,d.prependOnceListener=s,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments[1],r=new Array(e),n=0,o=0,s=0,f=function(t){r[o]=t,o=(o+1)%e,n++},l=function(){if(0!=n){var t=r[s];return r[s]=null,n--,s=(s+1)%e,t}},d=function(){for(var e=[];n;)e.push(l());return e};return{isEmpty:function(){return 0==n},put:function(l){if(n<e)f(l);else{var p=void 0;switch(t){case a:throw new Error(u);case i:r[o]=l,o=(o+1)%e,s=o;break;case c:p=2*e,r=d(),n=r.length,o=r.length,s=0,r.length=p,e=p,f(l)}}},take:l,flush:d}}r.d(t,"a",function(){return f});var o=r(0),u="Channel's Buffer overflow!",a=1,i=3,c=4,s={isEmpty:o.k,put:o.m,take:o.m},f={none:function(){return s},fixed:function(e){return n(e,a)},dropping:function(e){return n(e,2)},sliding:function(e){return n(e,i)},expanding:function(e){return n(e,c)}}},function(e,t,r){"use strict";function n(e,t){var r=new Headers;return r.append("Accept","application/json"),r.append("Content-Type","application/json"),t&&r.append("Authorization","Bearer "+t),r}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=""+e+t,f=n(r,i,c),l={method:r,headers:f,mode:"cors",cache:"default"};return"post"===r.toLowerCase()&&(l.body=JSON.stringify((0,a.serializeEJSON)(o))),__DEV__&&console.log("%c "+r+": "+s,"background: lightblue",l.body),fetch(s,l).then(function(e){if(e.json)return e.json().then(function(e){return(0,a.deserializeEJSON)(e)}).then(function(t){if(e.ok)return t;throw e.json=t,new u.APIError(e)});if(!e.ok)throw new u.APIError(e);return{}}).then(function(e){return __DEV__&&console.log("%c "+r+": "+t+" Response:","background: chartreuse",e),e}).catch(function(e){throw __DEV__&&console.log("%c "+r+": "+t+" Error:","background: indianred",e),e})}Object.defineProperty(t,"__esModule",{value:!0}),t.getHeaders=n,t.apifetch=o;var u=r(28),a=r(17)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){if(e)return e.toISOString().slice(0,10).replace(/-/g,"/")}function a(e){if(Array.isArray(e))return e.map(a);if("object"!==(void 0===e?"undefined":s(e)))return e;if(null===e)return e;var t=Object.keys(e);if(0===t.length)return e;var r=E[t[0]];return r?r(e):t.reduce(function(t,r){return t[r]=a(e[r]),t},{})}function i(e){if(e){if(Array.isArray(e))return e.map(i);if("object"!==(void 0===e?"undefined":s(e)))return e;if((0,d.default)(e.serializeToEJSON))return e.serializeToEJSON();for(var t in g)if(c(e)===t)return g[t](e);return Object.keys(e).reduce(function(t,r){return t[r]=i(e[r]),t},{})}return e}function c(e){var t=e.constructor.toString();return t.substring(9,t.indexOf("("))}Object.defineProperty(t,"__esModule",{value:!0}),t.UUID=t.ObjectId=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.displayDate=u,t.deserializeEJSON=a,t.serializeEJSON=i;var l=r(29),d=n(l),p=r(11),h=n(p),S=t.ObjectId=function(){function e(t){o(this,e),this.oid=t}return f(e,[{key:"toString",value:function(){return this.oid}},{key:"serializeToEJSON",value:function(){return{$oid:this.oid}}},{key:"is",value:function(e){return(void 0===e?"undefined":s(e))===s(this)&&this.oid===e.oid}}]),e}(),v=t.UUID=function(){function e(t){o(this,e),this.uuid=t}return f(e,[{key:"toString",value:function(){return this.uuid}},{key:"serializeToEJSON",value:function(){return{$uuid:this.uuid}}},{key:"is",value:function(e){return(void 0===e?"undefined":s(e))===s(this)&&this.uuid===e.uuid}}]),e}(),g={Date:function(e){return{$date:new h.default(e).setUTCMode(!0,!0).getTime()}},XDate:function(e){return{$date:e.clone().setUTCMode(!0,!0).getTime()}}},E={$oid:function(e){return new S(e.$oid)},$date:function(e){var t=new h.default;return isNaN(t.setTime(e.$date))&&(t=new h.default(e.$date)),t},$regex:function(e){return new RegExp(e.$regex,e.$options)},$undefined:function(){},$uuid:function(e){return new v(e.$uuid)}}},function(e,t,r){var n=r(31),o=n.Symbol;e.exports=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function u(e){var r=e.Sentry,n=e.jwtStore,o=e.baseURL,u=e.loginTimeout,a=e.processError;console.log("HELLO",{Sentry:r,jwtStore:n,baseURL:o,loginTimeout:u,processError:a}),t.authSagas=P=(0,w.default)(r,n,o,u,a),t.apiSagas=O=(0,S.default)(r,n,o,P.refreshJWT)}Object.defineProperty(t,"__esModule",{value:!0}),t.authSelectors=t.authConstants=t.authActions=t.authReducer=t.authSagas=t.apiSelectors=t.apiActions=t.apiReducer=t.apiConstants=t.apiSagas=void 0,t.config=u;var a=r(8),i=o(a),c=r(1),s=o(c),f=r(9),l=o(f),d=r(20),p=n(d),h=r(21),S=n(h),v=r(7),g=o(v),E=r(3),m=o(E),y=r(37),R=o(y),_=r(38),b=n(_),T=r(39),w=n(T),O={},P={};t.apiSagas=O,t.apiConstants=s,t.apiReducer=p.default,t.apiActions=i,t.apiSelectors=l,t.authSagas=P,t.authReducer=b.default,t.authActions=g,t.authConstants=m,t.authSelectors=R},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.fromJS)({}),t=arguments[1],r=(0,o.fromJS)(t.meta||{}).filter(function(e,t){return-1!==["endpoint","params"].indexOf(t)});switch(t.type){case u.REQUEST_FETCHING:return e.setIn([r,"fetching"],!0).setIn([r,"error"],!1).setIn([r,"success"],!1);case u.REQUEST_FETCHED:return e.setIn([r,"response"],(0,o.fromJS)(t.payload)).setIn([r,"fetching"],!1).setIn([r,"error"],!1).setIn([r,"success"],!0).setIn([r,"updated"],(new Date).toISOString());case u.REQUEST_FAILED:return e.setIn([r,"errorResponse"],(0,o.fromJS)(t.payload)).setIn([r,"fetching"],!1).setIn([r,"error"],!0).setIn([r,"success"],!1).setIn([r,"polling"],!1);case u.POLL_REQUEST:return e.setIn([r,"polling"],t.meta.interval);case u.STOP_POLL_REQUEST:return e.setIn([r,"polling"],!1);default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=r(4),u=r(1)},function(e,t,r){"use strict";function n(e,t,r,n){function f(){for(var o=arguments.length,u=Array(o),i=0;i<o;i++)u[i]=arguments[i];var c,s,f;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return c="",o.prev=1,o.next=4,(0,a.call)(t.get);case 4:return c=o.sent,o.next=7,d.apifetch.apply(void 0,[r].concat(u,[c=c.password]));case 7:return s=o.sent,o.abrupt("return",s);case 11:if(o.prev=11,o.t0=o.catch(1),c&&401!==o.t0.response.status&&403!==o.t0.response.status){o.next=30;break}return o.prev=14,o.delegateYield((0,a.call)(n),"t1",16);case 16:return o.next=18,(0,a.call)(t.get);case 18:return c=o.sent,o.next=21,d.apifetch.apply(void 0,[r].concat(u,[c.password]));case 21:return f=o.sent,o.abrupt("return",f);case 25:return o.prev=25,o.t2=o.catch(14),e.captureMessage("Could not perform request after re-fetching JWT"),o.next=30,(0,a.put)((0,p.logout)());case 30:throw o.t0;case 31:case"end":return o.stop()}},y[0],this,[[1,11],[14,25]])}function h(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u="",e.next=3,(0,a.call)(t.get);case 3:return u=e.sent,e.next=6,d.apifetch.apply(void 0,[r].concat(n,[u=u.password]));case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}},y[1],this)}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=e.replace(/\$\{([a-zA-Z0-9_]*)\}/g,function(e,n){if(!t[n])throw new Error("Required parameter, "+n+", has not been provied");return r[n]=!0,t[n]}),o=Object.entries(t).filter(function(e){return!r[e[0]]}).map(function(e){return e[0]+"="+e[1]}).join("&");return o?n+"?"+o:n}function v(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=Object.entries(n).filter(function(e){return"function"==typeof e[1]}),t=o({},n),r=0;case 3:if(!(r<e.length)){u.next=10;break}return u.next=6,(0,a.select)(e[r][1]);case 6:t[e[r][0]]=u.sent;case 7:r+=1,u.next=3;break;case 10:return u.abrupt("return",t);case 11:case"end":return u.stop()}},y[2],this)}function g(e){var t,r,n,o,u,c,d,p=e.meta,h=e.payload,g=void 0===h?{}:h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.endpoint,r=l.default[t],e.next=4,(0,a.call)(v,p.params);case 4:return n=e.sent,e.next=7,(0,a.select)(s.selectTimeSinceLastFetch,{endpoint:t,params:n});case 7:if(!((o=e.sent)&&o<r.cache)){e.next=14;break}return e.next=11,(0,a.put)((0,i.requestCacheUsed)(t,n));case 11:return e.next=13,(0,a.select)(s.selectRequestResponse,{endpoint:t,params:n});case 13:return e.abrupt("return",e.sent);case 14:return u=S(r.url,n),e.next=17,(0,a.put)((0,i.requestFetching)(t,n));case 17:return c=void 0,d=void 0,e.prev=19,e.next=22,(0,a.call)(f,u,r.method,g);case 22:return c=e.sent,e.next=25,(0,a.put)((0,i.requestFetched)(t,n,c));case 25:e.next=32;break;case 27:return e.prev=27,e.t0=e.catch(19),d=e.t0,e.next=32,(0,a.put)((0,i.requestFailed)(t,n,e.t0));case 32:if(d){e.next=34;break}return e.abrupt("return",c);case 34:throw d;case 35:case"end":return e.stop()}},y[3],this,[[19,27]])}function E(e){var t,r,n,o;return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(e.type!==c.STOP_POLL_REQUEST){f.next=2;break}return f.abrupt("return");case 2:t=e.meta,r=t.endpoint,n=t.params,o=(0,a.select)(s.selectRequestPollingInterval,{endpoint:r,params:n});case 4:if(!o){f.next=22;break}return f.prev=5,f.next=8,(0,a.call)(g().worker,e);case 8:f.next=15;break;case 10:return f.prev=10,f.t0=f.catch(5),f.next=14,(0,a.put)((0,i.stopPollApiRequest)(r,n));case 14:console.warn("Polling endpoint, "+e.meta.endpoint+", returned an error. Polling will be stopped.");case 15:return f.next=17,(0,a.select)(s.selectRequestPollingInterval,{endpoint:r,params:n});case 17:return o=f.sent,f.next=20,(0,a.call)(u.delay,o);case 20:f.next=4;break;case 22:case"end":return f.stop()}},y[4],this,[[5,10]])}function m(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[(0,u.takeEvery)([c.POLL_REQUEST,c.STOP_POLL_REQUEST],E),(0,u.takeEvery)(c.REQUEST,g)];case 2:case"end":return e.stop()}},y[5],this)}var y=[f,h,v,g,E,m].map(regeneratorRuntime.mark);return{secureApiSaga:f,secureApiSagaNoLogout:h,apiRequest:g,apiPoll:E,watcher:m}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=n;var u=r(12),a=r(13),i=r(8),c=r(1),s=r(9),f=r(27),l=function(e){return e&&e.__esModule?e:{default:e}}(f),d=r(16),p=r(7)},function(e,t,r){"use strict";var n=r(23),o=r(25),u=r(26),a=r(0);r.d(t,"a",function(){return n.a}),r.d(t,"b",function(){return o.a}),r.d(t,"c",function(){return u.a});var i=function(e){return"import { "+e+" } from 'redux-saga' has been deprecated in favor of import { "+e+" } from 'redux-saga/effects'.\nThe latter will not work with yield*, as helper effects are wrapped automatically for you in fork effect.\nTherefore yield "+e+" will return task descriptor to your saga and execute next lines of code."};n.a,o.a,u.a},function(e,t,r){"use strict";function n(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var c={done:!1,value:u.q(e)},s=function(e){return{done:!1,value:u.i.apply(void 0,[t].concat(n,[e]))}},f=void 0,l=function(e){return f=e};return o.a({q1:function(){return["q2",c,l]},q2:function(){return f===a.a?[o.b]:["q1",s(f)]}},"q1","takeEvery("+o.c(e)+", "+t.name+")")}t.a=n;var o=r(5),u=r(2),a=r(6)},function(e,t,r){"use strict";function n(e){try{u(),e()}finally{a()}}function o(e){c.push(e),s||(u(),i())}function u(){s++}function a(){s--}function i(){a();for(var e=void 0;!s&&void 0!==(e=c.shift());)n(e)}t.a=o;var c=[],s=0},function(e,t,r){"use strict";function n(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];var c={done:!1,value:u.q(e)},s=function(e){return{done:!1,value:u.i.apply(void 0,[t].concat(n,[e]))}},f=function(e){return{done:!1,value:u.e(e)}},l=void 0,d=void 0,p=function(e){return l=e},h=function(e){return d=e};return o.a({q1:function(){return["q2",c,h]},q2:function(){return d===a.a?[o.b]:l?["q3",f(l)]:["q1",s(d),p]},q3:function(){return["q1",s(d),p]}},"q1","takeLatest("+o.c(e)+", "+t.name+")")}t.a=n;var o=r(5),u=r(2),a=r(6)},function(e,t,r){"use strict";function n(e,t,r){for(var n=arguments.length,s=Array(n>3?n-3:0),f=3;f<n;f++)s[f-3]=arguments[f];var l=void 0,d=void 0,p={done:!1,value:u.a(t,i.a.sliding(1))},h=function(){return{done:!1,value:u.q(d)}},S=function(e){return{done:!1,value:u.i.apply(void 0,[r].concat(s,[e]))}},v={done:!1,value:u.d(c.f,e)},g=function(e){return l=e},E=function(e){return d=e};return o.a({q1:function(){return["q2",p,E]},q2:function(){return["q3",h(),g]},q3:function(){return l===a.a?[o.b]:["q4",S(l)]},q4:function(){return["q2",v]}},"q1","throttle("+o.c(t)+", "+r.name+")")}t.a=n;var o=r(5),u=r(2),a=r(6),i=r(15),c=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={getDevices:{url:"api/v1/devices",method:"GET",token:!0,cache:0},getBrands:{url:"api/v1/ir/brands",method:"GET",token:!0,cache:0},getWeather:{url:"api/v1/locations/${locationId}/weather_forecast",method:"GET",token:!0,cache:6e4}};t.default=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});t.APIError=function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"Request to "+e.url+" returned "+e.status+"."));return r.response=e,r.name="APIError",r}return u(t,e),t}(Error)},function(e,t,r){function n(e){if(!u(e))return!1;var t=o(e);return t==i||t==c||t==a||t==s}var o=r(30),u=r(36),a="[object AsyncFunction]",i="[object Function]",c="[object GeneratorFunction]",s="[object Proxy]";e.exports=n},function(e,t,r){function n(e){return null==e?void 0===e?c:i:s&&s in Object(e)?u(e):a(e)}var o=r(18),u=r(34),a=r(35),i="[object Null]",c="[object Undefined]",s=o?o.toStringTag:void 0;e.exports=n},function(e,t,r){var n=r(32),o="object"==typeof self&&self&&self.Object===Object&&self,u=n||o||Function("return this")();e.exports=u},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(t,r(33))},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){function n(e){var t=a.call(e,c),r=e[c];try{e[c]=void 0;var n=!0}catch(e){}var o=i.call(e);return n&&(t?e[c]=r:delete e[c]),o}var o=r(18),u=Object.prototype,a=u.hasOwnProperty,i=u.toString,c=o?o.toStringTag:void 0;e.exports=n},function(e,t){function r(e){return o.call(e)}var n=Object.prototype,o=n.toString;e.exports=r},function(e,t){function r(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectUserSettings=t.selectUserLoggedIn=t.selectErrorDetails=t.selectResetPasswordAPIState=t.selectRegistrationAPIState=t.selectAuthAPIState=t.selectUserIsPremium=t.selectUserGroups=t.selectEmail=t.selectUserId=t.selectAuthDomain=void 0;var n=r(10),o=t.selectAuthDomain=function(e){return e.get("auth")},u=(t.selectUserId=function(e){return e.getIn(["auth","userId"])},t.selectEmail=function(e){return e.getIn(["auth","email"])},t.selectUserGroups=function(e){return e.getIn(["auth","groups"]).toJS()});t.selectUserIsPremium=(0,n.createSelector)(u,function(e){return!!e&&e.indexOf("premium_user")>-1}),t.selectAuthAPIState=(0,n.createSelector)(o,function(e){return e.get("authAPIState").toJS()}),t.selectRegistrationAPIState=(0,n.createSelector)(o,function(e){return e.get("registrationAPIState").toJS()}),t.selectResetPasswordAPIState=(0,n.createSelector)(o,function(e){return e.get("resetPasswordAPIState").toJS()}),t.selectErrorDetails=(0,n.createSelector)(o,function(e){return e.get("error").toJS()}),t.selectUserLoggedIn=(0,n.createSelector)(o,function(e){return!!e.get("userId")}),t.selectUserSettings=(0,n.createSelector)(o,function(e){return e.getIn(["user","user_settings"])?e.getIn(["user","user_settings"]).toJS():{}})},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1];switch(t.type){case u.LOGIN_REQUEST:return e.set("authAPIState",(0,o.fromJS)(a.fetching)).set("resetPasswordAPIState",(0,o.fromJS)(a.initial));case u.LOGIN_USER:return e.set("authAPIState",(0,o.fromJS)(a.success)).set("authenticated",!0).set("userId",t.userId).set("email",t.email);case u.LOGOUT:return e.set("authAPIState",(0,o.fromJS)(a.initial)).set("registrationAPIState",(0,o.fromJS)(a.initial)).set("authenticated",!1).set("userId",null).set("groups",(0,o.fromJS)([]));case u.RESET_AUTH_API:return e.set("authAPIState",(0,o.fromJS)(a.initial)).set("registrationAPIState",(0,o.fromJS)(a.initial)).set("resetPasswordAPIState",(0,o.fromJS)(a.initial)).set("authenticated",!1).set("userId",null).set("groups",(0,o.fromJS)([]));case u.LOGIN_FAILURE:return e.set("authAPIState",(0,o.fromJS)(a.error)).set("error",(0,o.fromJS)(t.error));case u.SET_USER_GROUPS:return e.set("groups",(0,o.fromJS)(t.groups));case u.REGISTER_USER:return e.set("registrationAPIState",(0,o.fromJS)(a.fetching));case u.REGISTER_USER_SUCCESS:return e.set("registrationAPIState",(0,o.fromJS)(a.success));case u.REGISTER_USER_ERROR:return e.set("registrationAPIState",(0,o.fromJS)(a.error)).set("error",(0,o.fromJS)(t.error));case u.RESET_PASSWORD:return e.set("resetPasswordAPIState",(0,o.fromJS)(a.fetching));case u.RESET_PASSWORD_SUCCESS:return e.set("resetPasswordAPIState",(0,o.fromJS)(a.success));case u.RESET_PASSWORD_CLOSE:return e.set("resetPasswordAPIState",(0,o.fromJS)(a.initial));case u.RESET_PASSWORD_ERROR:return e.set("resetPasswordAPIState",(0,o.fromJS)(a.error)).set("error",(0,o.fromJS)(t.error));default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var o=r(4),u=r(3),a={initial:{fetching:!1,error:!1,success:!1,status:"initial"},fetching:{fetching:!0,error:!1,success:!1,status:"fetching"},error:{fetching:!1,error:!0,success:!1,status:"error"},success:{fetching:!1,error:!1,success:!0,status:"success"}},i=t.initialState={authAPIState:(0,o.fromJS)(a.initial),registrationAPIState:(0,o.fromJS)(a.initial),resetPasswordAPIState:(0,o.fromJS)(a.initial),userInviteAPIState:(0,o.fromJS)(a.initial),authenticated:!1,userId:null,email:null,groups:[],user:{},error:{}},c=(0,o.fromJS)(i);t.default=n},function(e,t,r){"use strict";function n(e,t,r,n,a){function f(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,o.call)(t.delete);case 3:r.next=9;break;case 5:return r.prev=5,r.t0=r.catch(0),r.next=9,(0,o.call)(a,r.t0);case 9:e.setUserContext({email:"",userID:"",username:"",extra:{}});case 10:case"end":return r.stop()}},E[0],this,[[0,5]])}function p(){var r,f,d,p,h,S,v,g,m;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return r="api/v1/users/refresh_token",E.prev=1,E.next=4,(0,o.race)({response:(0,o.call)(c.secureApiSagaNoLogout,r,"GET",{}),timeout:(0,o.call)(u.delay,n)});case 4:if(f=E.sent,d=f.response,!(p=f.timeout)){E.next=9;break}throw new Error("timeout");case 9:return E.next=11,(0,o.call)(t.get);case 11:return h=E.sent,S=h.username,E.next=15,(0,o.call)(t.set,S,d.token);case 15:return v=(0,s.deserializeEJSON)((0,i.default)(d.token)),g=v.aud,m=v.oid.oid,e.setUserContext({email:S,userID:m,username:"",extra:{}}),E.next=21,(0,o.put)(l.setUserGroups(g));case 21:E.next=27;break;case 23:return E.prev=23,E.t0=E.catch(1),E.next=27,(0,o.call)(a,E.t0);case 27:case"end":return E.stop()}},E[1],this,[[1,23]])}function h(f){var d,p,h,S,v,g,m,y,R,_,b,T;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return d="api/v1/users/login",p="POST",h=(f.email||"").toLowerCase(),S=f.password||"",v={email:h,password:S},g=void 0,E.prev=6,E.next=9,(0,o.race)({response:(0,o.call)(c.apifetch,r,d,p,v),timeout:(0,o.call)(u.delay,n)});case 9:if(g=E.sent,!g.timeout){E.next=12;break}throw new Error("timeout");case 12:E.next=21;break;case 14:return E.prev=14,E.t0=E.catch(6),E.next=18,(0,o.call)(a,E.t0);case 18:return m=E.sent,E.next=21,(0,o.put)(l.loginFailure(m));case 21:return y=g,R=y.response,E.next=24,(0,o.call)(t.set,f.email,R.token);case 24:return _=(0,s.deserializeEJSON)((0,i.default)(R.token)),b=_.oid.oid,e.setUserContext({email:h,userID:b,username:"",extra:{}}),T=_.aud,E.next=30,(0,o.put)(l.setUserGroups(T));case 30:return E.next=32,(0,o.put)(l.loginUserState(b,h));case 32:case"end":return E.stop()}},E[2],this,[[6,14]])}function S(e){var t,n,u,i,s,f,d,p,h;return regeneratorRuntime.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.prev=0,t="api/v1/users/signup",n="POST",u=(e.payload.email||"").toLowerCase(),i=e.payload.password||"",s=e.payload.fname||"",f=e.payload.lname||"",d=e.payload.user_type||"home",p={fname:s,lname:f,email:u,password:i,user_type:d},S.next=11,(0,c.apifetch)(r,t,n,p);case 11:return S.next=13,(0,o.put)(l.registerUserSuccess());case 13:S.next=22;break;case 15:return S.prev=15,S.t0=S.catch(0),S.next=19,(0,o.call)(a,S.t0);case 19:return h=S.sent,S.next=22,(0,o.put)(l.registerUserError(h));case 22:case"end":return S.stop()}},E[3],this,[[0,15]])}function v(e){var t,r,n,u,i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,t="api/v1/users/reset_password",r="POST",n=(e.payload.email||"").toLowerCase(),u={email:n},s.next=7,(0,c.apifetch)(t,r,u);case 7:return s.next=9,(0,o.put)(l.resetPasswordSuccess());case 9:s.next=18;break;case 11:return s.prev=11,s.t0=s.catch(0),s.next=15,(0,o.call)(a,s.t0);case 15:return i=s.sent,s.next=18,(0,o.put)(l.resetPasswordError(i));case 18:case"end":return s.stop()}},E[4],this,[[0,11]])}function g(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[(0,u.takeLatest)(d.LOGIN_REQUEST,h),(0,u.takeLatest)(d.LOGOUT,f),(0,u.takeLatest)(d.RESET_PASSWORD,v),(0,u.takeLatest)(d.REFRESH_JWT,p),(0,u.takeLatest)(d.REGISTER_USER,S)];case 2:case"end":return e.stop()}},E[5],this)}var E=[f,p,h,S,v,g].map(regeneratorRuntime.mark);return{logoutSaga:f,loginSaga:h,registerUserSaga:S,resetPasswordSaga:v,refreshJWT:p,watcher:g}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=r(13),u=r(12),a=r(40),i=function(e){return e&&e.__esModule?e:{default:e}}(a),c=r(16),s=r(17),f=r(7),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(f),d=r(3)},function(e,t,r){"use strict";function n(e){this.message=e}var o=r(41);n.prototype=new Error,n.prototype.name="InvalidTokenError",e.exports=function(e,t){if("string"!=typeof e)throw new n("Invalid token specified");t=t||{};var r=!0===t.header?0:1;try{return JSON.parse(o(e.split(".")[r]))}catch(e){throw new n("Invalid token specified: "+e.message)}},e.exports.InvalidTokenError=n},function(e,t,r){function n(e){return decodeURIComponent(o(e).replace(/(.)/g,function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}var o=r(42);e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return n(t)}catch(e){return o(t)}}},function(e,t){function r(e){this.message=e}function n(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,u,a=0,i=0,c="";u=t.charAt(i++);~u&&(n=a%4?64*n+u:u,a++%4)?c+=String.fromCharCode(255&n>>(-2*a&6)):0)u=o.indexOf(u);return c}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||n}])});